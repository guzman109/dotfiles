return {
  {
    "EdenEast/nightfox.nvim",
    opts = {
      options = {
        transparent = true,
        dim_inactive = true,
        terminal_colors = true,
        styles = {
          -- Optimized for C++ and Python (Pydantic/PyTorch) workflow
          comments = "italic", -- Visible but not screaming (TODOs catch eye)
          conditionals = "NONE", -- Indentation already handles this
          constants = "bold", -- C++ enums, PyTorch constants need to pop
          functions = "italic", -- Spot definitions when scanning
          keywords = "italic", -- Subtle distinction for def/class/return
          numbers = "NONE", -- Already colored, don't need extra
          operators = "NONE", -- Keep visual noise down
          strings = "NONE", -- Already distinct via color
          types = "bold", -- CRITICAL - Pydantic, C++ templates, type hints
          variables = "NONE", -- Most common element, keep clean
        },
        inverse = {
          match_paren = true, -- Matching brackets pop
          visual = false,
          search = true, -- Search results unmissable
        },
        modules = {
          diagnostic = { enable = true, background = false },
          native_lsp = { enable = true, background = false },
          treesitter = true,
          lsp_semantic_tokens = true,
        },
      },
      groups = {
        all = {
          CursorLine = { bg = "bg1" },
          CursorLineNr = { fg = "fg1", style = "bold" },
          ColorColumn = { bg = "bg1" },
          IndentBlanklineChar = { fg = "bg3" },
          IndentBlanklineContextChar = { fg = "fg3" },

          -- Python/C++ specific treesitter enhancements
          ["@type"] = { style = "bold" },
          ["@type.builtin"] = { style = "bold" },
          ["@type.qualifier"] = { style = "bold" }, -- const, static in C++
          ["@storageclass"] = { style = "bold" }, -- static, extern
          ["@keyword.return"] = { fg = "palette.red", style = "bold" }, -- return pops
          ["@parameter"] = { style = "italic" }, -- Function params distinct
          ["@variable.builtin"] = { style = "italic" }, -- self, this
          ["@constructor"] = { style = "bold" }, -- Class instantiation
          ["@function.call"] = { style = "NONE" }, -- Calls stay clean
          ["@method.call"] = { style = "NONE" }, -- Calls stay clean
          ["@punctuation.bracket"] = { fg = "palette.fg2" }, -- Muted brackets
          ["@punctuation.delimiter"] = { fg = "palette.fg2" },

          -- Python decorators (FastAPI, Pydantic)
          ["@attribute"] = { fg = "palette.orange", style = "italic" },
          ["@decorator"] = { fg = "palette.orange", style = "italic" },

          -- C++ specific
          ["@namespace"] = { fg = "palette.cyan" },
          ["@constant.macro"] = { style = "bold" }, -- #define constants

          -- Transparent floats
          NormalFloat = { bg = "NONE" },
          FloatBorder = { fg = "palette.blue", bg = "NONE" },
          TelescopeNormal = { bg = "NONE" },
          TelescopeBorder = { fg = "palette.blue", bg = "NONE" },
          WhichKeyFloat = { bg = "NONE" },
        },
      },
    },
  },
  {
    "catppuccin/nvim",
    opts = {
      flavour = "auto", -- latte, frappe, macchiato, mocha
      background = { -- :h background
        light = "latte",
        dark = "mocha",
      },
      transparent_background = true,
      float = {
        transparent = true,
      },
      -- no_italic = true,
      styles = {
        comments = {
          "bold",
          "italic",
        },
        keywords = {
          "italic",
          "bold",
        },
        functions = { "italic" },
        loops = { "italic" },
        properties = { "bold" },
        types = { "italic", "bold" },
        operators = { "bold" },
        -- miscs = {},
      },
      integrations = { blink_cmp = true },
    },
  },
  {
    "folke/tokyonight.nvim",
    opts = {
      style = "night",
      transparent = false,
      styles = {
        keywords = { bold = true },
        functions = { bold = true },
      },
    },
  },
  {
    "folke/which-key.nvim",
    opts = function(_, opts)
      opts.icons = {
        rules = {
          { pattern = "themes", icon = LazyVim.config.icons.kinds.Color, color = "orange" },
        },
      }
    end,
  },
  {
    "zaldih/themery.nvim",
    config = function()
      require("themery").setup({
        themes = {
          { name = "Catppuccin Mocha", colorscheme = "catppuccin-mocha" },
          { name = "Catppuccin Latte", colorscheme = "catppuccin-latte" },
          { name = "Catppuccin Frappé", colorscheme = "catppuccin-frappe" },
          { name = "Catppuccin Macchiato", colorscheme = "catppuccin-macchiato" },
          { name = "Tokyo Night Storm", colorscheme = "tokyonight-storm" },
          { name = "Tokyo Night OG", colorscheme = "tokyonight-night" },
          { name = "Tokyo Night Moon", colorscheme = "tokyonight-moon" },
          { name = "Tokyo Night Day", colorscheme = "tokyonight-day" },
          { name = "Carbonfox", colorscheme = "carbonfox" },
          { name = "Dayfox", colorscheme = "dayfox" },
          { name = "Dawnfox", colorscheme = "dawnfox" },
          { name = "Duskfox", colorscheme = "duskfox" },
          { name = "Nightfox", colorscheme = "nightfox" },
          { name = "Nordfox", colorscheme = "nordfox" },
          { name = "Terafox", colorscheme = "terafox" },
        }, -- Your list of installed colorschemes
        livePreview = true, -- Apply theme while browsing. Default to true.
      })
      vim.keymap.set({ "n", "v" }, "<leader>tt", "<cmd>Themery<cr>", { desc = "Open Themes" })
      vim.keymap.set({ "n", "v" }, "<leader>td", "<cmd>colorscheme catppuccin-latte<cr>", { desc = "Day Theme" })
      vim.keymap.set({ "n", "v" }, "<leader>tn", "<cmd>colorscheme catppuccin-mocha<cr>", { desc = "Night Theme" })
      vim.keymap.set("n", "<leader>ta", function()
        local themery = require("themery")
        local currentTheme = themery.getCurrentTheme()
        if currentTheme and currentTheme.name == "catppuccin-latte" then
          themery.setThemeByName("catppuccin-mocha", true)
        else
          themery.setThemeByName("catppuccin-latte", true)
        end
      end, { noremap = true })

      -- im.keymap.set(),
    end,
  },
  {
    "f-person/auto-dark-mode.nvim",
    lazy = false,
    priority = 1000,
    opts = {
      update_interval = 1000,
      set_dark_mode = function()
        vim.api.nvim_set_option_value("background", "dark", {})
        vim.cmd("colorscheme duskfox")
      end,
      set_light_mode = function()
        vim.api.nvim_set_option_value("background", "light", {})
        vim.cmd("colorscheme dawnfox")
      end,
    },
  },
  -- Indent guides for better code structure visibility
  {
    "lukas-reineke/indent-blankline.nvim",
    event = "LazyFile",
    main = "ibl",
    opts = {
      indent = {
        char = "│",
        tab_char = "│",
      },
      scope = { enabled = false },
      exclude = {
        filetypes = {
          "help",
          "alpha",
          "dashboard",
          "neo-tree",
          "Trouble",
          "trouble",
          "lazy",
          "mason",
          "notify",
          "toggleterm",
          "lazyterm",
        },
      },
    },
  },
  -- Show context of current function/class at top of window
  {
    "nvim-treesitter/nvim-treesitter-context",
    event = "LazyFile",
    opts = {
      max_lines = 3,
      multiline_threshold = 1,
      trim_scope = "outer",
      mode = "cursor",
      separator = "─",
    },
  },
}
